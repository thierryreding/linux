# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/reserved-memory/memory-region.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Reserved Memory Region Device Tree Binding

maintainers:
  - devicetree-spec@vger.kernel.org

description: |
  Regions in the /reserved-memory node may be referenced by other device
  nodes by adding a memory-region property to the device node.

select: true

properties:
  memory-region:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    description: >
      Phandle to a /reserved-memory child node assigned to the device.

      Reserved memory region references can be accompanied by a memory region
      specifier, which provides additional information about how the memory region
      will be used in that specific context. If a reserved memory region does not
      have the #memory-region-cells property, 0 is implied and no information
      besides the phandle is conveyed. For reserved memory regions that contain
      #memory-region-cells = <1>, the following encoding applies if not otherwise
      overridden by the bindings selected by the region's compatible string:

        - bit 0: If set, requests that the region be reserved if the system uses an
          IOMMU for I/O virtual address translations. One example where this can be
          used if a coprocessor uses a predefined region of memory

        - bit 1: If set, requests that the region be identity mapped if the system
          uses an IOMMU for I/O virtual address translations. This is used, for
          example, when a bootloader has configured a display controller to display
          a boot splash. Once the OS takes over and enables the IOMMU for the given
          display controller, the IOMMU may fault if the framebuffer hasn't been
          mapped to the IOMMU at the address that the display controller tries to
          access.

  memory-region-names:
    $ref: /schemas/types.yaml#/definitions/string-array
    description: >
      A list of names, one for each corresponding entry in the
      memory-region property

additionalProperties: true

examples:
  - |
    fb0: video@12300000 {
        /* ... */
        reg = <0x12300000 0x1000>;
        memory-region = <&display_reserved>;
    };

...
