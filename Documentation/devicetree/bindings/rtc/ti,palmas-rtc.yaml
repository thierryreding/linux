# SPDX-License-Identifier: GPL-2.0-only
%YAML 1.2
---
$id: http://devicetree.org/schemas/rtc/ti,palmas-rtc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Texas Instruments Palmas family of Power-Management ICs (RTC)

maintainers:
  - Alexandre Belloni <alexandre.belloni@bootlin.com>

properties:
  compatible:
    const: ti,palmas-rtc

  interrupts:
    maxItems: 1

  ti,backup-battery-chargeable:
    $ref: /schemas/types.yaml#/definitions/flag
    description: The Palmas series device like TPS65913 or TPS80036 supports the backup battery
      for powering the RTC when main battery is removed or in very low power state. The backup
      battery can be chargeable or non-chargeable. This flag will tells whether battery is
      chargeable or not. If charging battery then driver can enable the charging.

  ti,backup-battery-charge-high-current:
    $ref: /schemas/types.yaml#/definitions/flag
    description: Enable high current charging in backup battery. Device supports the < 100uA and >
      100uA charging. The high current will be > 100uA. Absence of this property will charge
      battery to lower current i.e. < 100uA.

allOf:
  - $ref: rtc.yaml

unevaluatedProperties: false

required:
  - compatible
  - interrupts

examples:
  - |
    i2c {
      #address-cells = <1>;
      #size-cells = <0>;

      tps65913@58 {
        compatible = "ti,tps65913", "ti,palmas";
        reg = <0x58>;

        #interrupt-cells = <2>;
        interrupt-controller;

        rtc {
          compatible = "ti,palmas-rtc";
          interrupt-parent = <&palmas>;
          interrupts = <8 0>;
          ti,backup-battery-chargeable;
          ti,backup-battery-charge-high-current;
        };
      };
    };
