# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/gpu/host1x/nvidia,tegra20-host1x.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: Device tree binding for NVIDIA Host1x

maintainers:
  - Thierry Reding <treding@gmail.com>
  - Mikko Perttunen <mperttunen@nvidia.com>

properties:
  $nodename:
    pattern: "^host1x@[0-9a-f]*$"

  compatible:
    oneOf:
      - const: nvidia,tegra20-host1x
      - const: nvidia,tegra30-host1x
      - const: nvidia,tegra114-host1x
      - const: nvidia,tegra124-host1x
      - items:
          - const: nvidia,tegra132-host1x
          - const: nvidia,tegra124-host1x
      - const: nvidia,tegra210-host1x

  reg:
    maxItems: 1

  interrupts:
    items:
      - description: Syncpoint threshold interrupt
      - description: General interrupt

  interrupt-names:
    items:
      - const: syncpt
      - const: host1x

  clocks:
    maxItems: 1

  clock-names:
    items:
      - const: host1x

  resets:
    maxItems: 1

  reset-names:
    items:
      - const: host1x

  iommus:
    maxItems: 1

  interconnects:
    maxItems: 1

  interconnect-names:
    items:
      - const: dma-mem

  '#address-cells':
    const: 1

  '#size-cells':
    const: 1

  ranges: true

required:
  - compatible
  - reg
  - interrupts
  - interrupt-names
  - clocks
  - clock-names
  - resets
  - reset-names
  - '#address-cells'
  - '#size-cells'
  - ranges

additionalProperties:
  type: object

if:
  properties:
    compatible:
      contains:
        anyOf:
          - const: nvidia,tegra186-host1x
          - const: nvidia,tegra194-host1x
then:
  properties:
    reg:
      items:
        - description: Hypervisor-accessible register area
        - description: VM-accessible register area
    reg-names:
      items:
        - const: hypervisor
        - const: vm
  required:
    - reg-names

examples:
  - |
    #include <dt-bindings/clock/tegra20-car.h>
    #include <dt-bindings/interrupt-controller/arm-gic.h>

    host1x@50000000 {
        compatible = "nvidia,tegra20-host1x";
        reg = <0x50000000 0x00024000>;
        interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>, /* syncpt */
                      <GIC_SPI 67 IRQ_TYPE_LEVEL_HIGH>; /* general */
        interrupt-names = "syncpt", "host1x";
        clocks = <&tegra_car TEGRA20_CLK_HOST1X>;
        clock-names = "host1x";
        resets = <&tegra_car 28>;
        reset-names = "host1x";

        #address-cells = <1>;
        #size-cells = <1>;

        ranges = <0x54000000 0x54000000 0x04000000>;
    };
