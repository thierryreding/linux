# SPDX-License-Identifier: GPL-2.0-only
%YAML 1.2
---
$id: http://devicetree.org/schemas/input/ti,palmas-pwrbutton.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Texas Instruments Palmas family of Power-Management ICs (power button)

maintainers:
  - Nishanth Menon <nm@ti.com>

description: |
  This module is part of the Palmas family of PMICs. For more details about the whole chip see:

    Documentation/devicetree/bindings/mfd/palmas.txt

  This module provides a simple power button event via an interrupt.

properties:
  compatible:
    const: ti,palmas-pwrbutton

  interrupts:
    maxItems: 1

  wakeup-source:
    $ref: /schemas/types.yaml#/definitions/flag
    description: Enables wake up of host system on power button press.

  ti,palmas-long-press-seconds:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      Duration in seconds which the power button should be kept pressed for Palmas to power off
      automatically.

      NOTE: This depends on OTP support and POWERHOLD signal configuration on platform.
    enum: [ 6, 8, 10, 12 ]

  ti,palmas-pwron-debounce-milli-seconds:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      Duration in milliseconds which the power button should be kept pressed for Palmas to
      register a press for debouncing purposes. NOTE: This depends on specific Palmas variation
      capability.
    enum: [ 15, 100, 500, 1000 ]

additionalProperties: false

required:
  - compatible
  - interrupts

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>

    i2c {
      #address-cells = <1>;
      #size-cells = <0>;

      pmic@48 {
        compatible = "ti,tps65913", "ti,palmas";
        reg = <0x48>;

        #interrupt-cells = <2>;
        interrupt-controller;

        pwrbutton {
          compatible = "ti,palmas-pwrbutton";
          interrupt-parent = <&tps659038>;
          interrupts = <1 IRQ_TYPE_EDGE_FALLING>;
          ti,palmas-long-press-seconds = <12>;
          ti,palmas-pwron-debounce-milli-seconds = <15>;
        };
      };
    };
